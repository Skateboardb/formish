{"version":3,"sources":["storage/defaults.js","storage/index.js","file.js","inputs/useOnChange.js","inputs/TextInput.js","inputs/RadioInput.js","inputs/YesNoInput.js","inputs/SelectInput.js","inputs/ChoicesInput.js","inputs/index.js","inputs/DateInput.js","inputs/ListInput.js","screens/Home/Form.js","screens/Home/Records.js","processor/process.js","processor/useMarkDown.js","Preview.js","ToolBar.js","screens/Home/Home.js","screens/Home/index.js","screens/Designer/Structure.js","screens/Designer/Help.js","screens/Designer/Designer.js","screens/Designer/index.js","App.js","index.js"],"names":["defaultStructure","name","type","choices","defaultMarkDown","concat","listeners","storage","loadConfig","res","JSON","parse","localStorage","getItem","structure","markdown","Error","err","console","log","saveConfig","config","setItem","stringify","loadRecords","r","Array","isArray","saveRecords","records","getRecord","id","saveRecord","data","record","list","forEach","listener","parseInt","Object","assign","unshift","listen","existingList","push","idx","indexOf","splice","length","useConfig","Upload","_ref","onChange","other","objectWithoutProperties","ref","useRef","handleClick","useCallback","current","click","handleChange","e","target","files","reader","FileReader","onload","result","readAsText","react_default","a","createElement","Fragment","style","display","onClick","Download","_ref2","onPrepare","_useState","useState","_useState2","slicedToArray","stage","setStage","_useState3","_useState4","file","setFile","prepare","asyncToGenerator","regenerator_default","mark","_callee","blob","wrap","_context","prev","next","sent","Blob","stop","reset","href","URL","createObjectURL","download","disabled","useOnChange","value","TextInput","RadioInput","chkValue","className","map","choice","key","checked","SelectInput","ChoicesInput","split","p","trim","filter","defaultProps","types","C","booleanOnChange","v","LineInput","TypeInput","find","t","RecordForm","onSave","modified","addRecord","objectSpread","defineProperty","saveCaption","_ref3","undefined","textAlign","itemKey","index","Row","React","memo","setSelected","selected","item","setRecord","useEffect","useRecord","width","PN","DATE","flex","NAME","Records","setFilter","updateFilter","filteredRecords","useMemo","f","toLowerCase","pn","Body","height","alignItems","justifyContent","index_esm","itemCount","itemData","itemSize","props","placeholder","Mr","Mrs","Ms","gender","he","she","GENDER","date","fmt","param","arguments","d","Date","now","format","specials","AGE","dob","dobDate","nowDate","distanceInWordsStrict","MARRIED","He","HE","Him","him","HIM","His","his","HIS","TIME","YY","YYYY","A","aa","M","MM","MMM","MMMM","D","Do","DD","dd","ddd","dddd","i","H","HH","h","hh","mm","ss","useMarkDown","source","reduce","s","sample","template","replace","match","first","_first$split","_first$split2","toArray","field","params","slice","special","apply","toConsumableArray","numeral","test","join","process","onPrint","window","print","Preview","printable","position","right","top","react_markdown_default","ToolBarContext","createContext","seq","useToolBar","Component","dependencies","registerTools","useContext","groupSeq","n","useSeq","createBackup","filename","createRestore","setRecords","obj","confirm","existingRecords","alert","message","Home","createRecord","rec","st","DOB","createNewRecord","_useState5","_useState6","setModified","changedRecord","handleSelect","handleSave","Structure","Sample","Help","importTemplate","setStructure","setSource","exportTemplate","Designer","help","setHelp","_useState7","_useState8","toggleHelp","handleSource","handleStructure","handleAdd","padding","backgroundColor","outline","fontSize","colSpan","align","App","edit","setEdit","screens_Designer","screens_Home","ReactDOM","render","title","tools","updateTools","Group","sort","b","Provider","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.a99dc583.chunk.js","sourcesContent":["\nexport const defaultStructure = [\n  { name: 'PN', type: 'Text' },\n  { name: 'DATE', type: 'Date' },\n  { name: 'NAME', type: 'Text' },\n  { name: 'DOB', type: 'Date' },\n  { name: 'GENDER', type: 'Choices', choices: 'Male,Female' },\n  { name: 'MARRIED', type: 'Yes/No' },\n  { name: 'DOCTOR', type: 'Text' },\n  { name: 'DIAGNOSIS', type: 'List' },\n  { name: 'CONDITION', type: 'Text' },\n  { name: 'MEDICATIONS', type: 'List' },\n];\n\nexport const defaultMarkDown = (`\n# Report\n### {{dddd}}, {{Do}} {{MMM}}, {{YYYY}}\n\nReport for {{Mr}} {{NAME}}. {{He}} has been diagnosed with **{{DIAGNOSIS}}**.\n{{His}} condition is {{CONDITION}}.\n\n{{He}} is {{AGE}} old as per our records.\n\n{{MEDICATIONS:1.}}\n\n&nbsp;${'  '}\n................................${'  '}\n{{DOCTOR}}\n`);\n","import { useEffect, useState } from 'react';\nimport { defaultStructure, defaultMarkDown } from './defaults';\n\nconst listeners = {};\n\nconst storage = {\n  loadConfig: () => {\n    try {\n      const res = JSON.parse(localStorage.getItem('configuration'));\n      if (res === null || !res.structure || !res.markdown) {\n        throw new Error('Invalid data');\n      }\n      return res;\n    } catch (err) {\n      console.log('Error', err);\n      return {\n        structure: defaultStructure,\n        markdown: defaultMarkDown,\n      };\n    }\n  },\n  saveConfig: (config) => {\n    localStorage.setItem('configuration', JSON.stringify(config));\n  },\n\n  loadRecords: () => {\n    try {\n      const r = JSON.parse(localStorage.getItem('records'));\n      if (!Array.isArray(r)) throw new Error('Invalid data');\n      return r;\n    } catch (err) {\n      return [];\n    }\n  },\n\n  saveRecords: (records) => {\n    if (!Array.isArray(records)) {\n      throw new Error('Records are meant to be an array');\n    }\n\n    localStorage.setItem('records', JSON.stringify(records));\n  },\n\n  getRecord: (id) => {\n    try {\n      const res = JSON.parse(localStorage.getItem(`rec-${id}`));\n      if (!res) throw new Error('Invalid data');\n      return res;\n    } catch (err) {\n      return {};\n    }\n  },\n\n  saveRecord: (data) => {\n    let record = data;\n    if (!data.id) {\n      const records = storage.loadRecords();\n      const id = (parseInt(records[0]) || 0) + 1;\n      record = Object.assign({}, data, { id });\n      console.log('Saving record', id, record);\n      localStorage.setItem(`rec-${id}`, JSON.stringify(record));\n      records.unshift(id);\n      storage.saveRecords(records);\n      return records;\n    } else {\n      localStorage.setItem(`rec-${data.id}`, JSON.stringify(data));\n      const list = listeners[data.id];\n      if (list) {\n        list.forEach((listener) => listener(data));\n      }\n      return [data.id];\n    }\n  },\n\n  listen: (id, listener) => {\n    const existingList = listeners[id];\n    const list = existingList || [];\n    if (list !== existingList) {\n      listeners[id] = list;\n    }\n\n    list.push(listener);\n\n    return () => {\n      const idx = list.indexOf(listener);\n      if (idx >= 0) {\n        list.splice(idx, 1);\n        if (list.length === 0) {\n          delete listeners[id];\n        }\n      }\n    };\n  }\n}\n\nexport function useConfig() {\n  return storage.loadConfig();\n}\n\nexport function useRecord(id) {\n  const [record, setRecord] = useState(storage.getRecord(id));\n  useEffect(() => {\n    return storage.listen(id, setRecord);\n  }, [id]);\n\n  return record;\n}\n\nexport default storage;\n","import React, { useRef, useCallback, useState } from 'react';\n\nexport function Upload({ onChange, ...other }) {\n  const ref = useRef();\n\n  const handleClick = useCallback(() => {\n    ref.current.click();\n  }, []);\n\n  const handleChange = useCallback((e) => {\n    if (e.target.files.length > 0) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        onChange(reader.result);\n      }\n      reader.readAsText(e.target.files[0]);\n    }\n  }, [onChange]);\n\n  return (\n    <>\n      <input ref={ref} onChange={handleChange} type=\"file\" style={{ display: 'none' }} />\n      <button {...other} onClick={handleClick}></button>\n    </>\n  );\n}\n\nexport function Download({ onPrepare, ...other }) {\n  const [stage, setStage] = useState(0);\n  const [file, setFile] = useState(null);\n\n  const prepare = useCallback(async () => {\n    setStage(1);\n    const file = await onPrepare();\n    const blob = new Blob([file.data], { type: file.type });\n    // window.location.replace(URL.createObjectURL(blob));\n    setFile({ blob, name: file.name });\n  }, [onPrepare]);\n\n  const reset = useCallback(() => {\n    setStage(0);\n    setFile(null);\n  }, []);\n\n  if (file) {\n    return (\n      <button>\n      <a\n        href={URL.createObjectURL(file.blob)}\n        onClick={reset}\n        download={file.name}\n      >{`Download ${file.name}`}</a></button>\n    );\n  } else if (stage === 0) {\n    return <button {...other} onClick={prepare} />\n  } else if (stage === 1) {\n    return <button {...other} disabled />\n  }\n}\n","import { useCallback } from 'react';\n\nexport default function useOnChange(onChange) {\n  return useCallback(e => onChange(e.target.name, e.target.value), [onChange]);\n}\n","import React from 'react';\nimport useOnChange from './useOnChange';\n\nexport default function TextInput({ onChange, ...other }) {\n  const handleChange = useOnChange(onChange);\n  return <input type=\"text\" onChange={handleChange} {...other} />\n};\n","import React from 'react';\nimport useOnChange from './useOnChange';\n\nexport default function RadioInput({ onChange, choices, ...other }) {\n  const handleChange = useOnChange(onChange);\n  const chkValue = typeof other.value !== 'boolean' ? other.value : (\n    other.value ? 'Yes' : 'No'\n  );\n\n  return (\n    <div className=\"Radio\">\n      {choices.map((choice) => (\n        <label key={choice}>\n          <input {...other} type=\"radio\" value={choice} checked={chkValue === choice} onChange={handleChange} />\n          <span>{choice}</span>\n        </label>\n      ))}\n    </div>\n  );\n}\n","import React, { useCallback } from 'react';\nimport RadioInput from './RadioInput';\n\nconst choices = ['Yes', 'No'];\n\nexport default function YesNoInput({ onChange, ...other }) {\n  const booleanOnChange = useCallback((name, v) => {\n    onChange(name, v === 'Yes');\n  }, [onChange]);\n\n  return (\n    <RadioInput {...other} onChange={booleanOnChange} choices={choices} />\n  );\n}\n","import React from 'react';\nimport useOnChange from './useOnChange';\n\nexport default function SelectInput({ onChange, choices, ...other }) {\n  const handleChange = useOnChange(onChange);\n\n  return (\n    <select onChange={handleChange} {...other}>\n      {choices.map((choice) => (\n        <option key={choice}>{choice}</option>\n      ))}\n    </select>\n  );\n}\n","import React from 'react';\nimport RadioInput from './RadioInput';\nimport SelectInput from './SelectInput';\n\nexport default function ChoicesInput({ onChange, choices, ...other }) {\n  const list = choices.split(',').map(p => p.trim()).filter(p => p.length > 0);\n\n  if (list.length === 0) {\n    return <span>No choice available</span>;\n  } else if (list.length < 4) {\n    return <RadioInput onChange={onChange} choices={list} {...other} />;\n  } else {\n    return <SelectInput onChange={onChange} choices={list} {...other} />;\n  }\n}\n\nChoicesInput.defaultProps = {\n  choices: '',\n}","import TextInput from './TextInput';\nimport DateInput from './DateInput';\nimport ListInput from './ListInput';\nimport YesNoInput from './YesNoInput';\nimport ChoicesInput from './ChoicesInput';\nimport SelectInput from './SelectInput';\n\nexport {\n  TextInput,\n  DateInput,\n  ListInput,\n  YesNoInput,\n  ChoicesInput,\n  SelectInput,\n}\n\nexport const types = [\n  { id: 'Text', C: TextInput },\n  { id: 'Date', C: DateInput },\n  { id: 'List', C: ListInput },\n  { id: 'Yes/No', C: YesNoInput },\n  { id: 'Choices', C: ChoicesInput },\n];","import React from 'react';\nimport useOnChange from './useOnChange';\n\nexport default function DateInput({ onChange, ...other }) {\n  const handleChange = useOnChange(onChange);\n  return <input type=\"date\" onChange={handleChange} {...other} />\n}\n","import React from 'react';\nimport useOnChange from './useOnChange';\n\nexport default function ListInput({ onChange, ...other }) {\n  const handleChange = useOnChange(onChange);\n  return <textarea onChange={handleChange} {...other} />\n}\n","import React, { useCallback } from 'react';\nimport { types } from '../../inputs';\nimport { useConfig } from '../../storage';\n\nfunction LineInput({ type, name, value, choices, onChange }) {\n  const TypeInput = types.find(t => t.id === type).C;\n  return (\n    <div className=\"InputRow\">\n      <label>\n        <span>{name}</span>\n        <TypeInput name={name} choices={choices} onChange={onChange} value={value} />\n      </label>\n    </div>\n  );\n}\n\nexport default function RecordForm({ record, onChange, onSave, modified, addRecord }) {\n  const config = useConfig();\n\n  const handleChange = useCallback((name, value) => {\n    onChange((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  }, [onChange]);\n\n  const saveCaption = record.id ? 'Update' : 'Create';\n\n  return (\n    <div className=\"RecordForm\">\n      {config.structure.map(({ type, name, choices }) => {\n        const v = record[name];\n        return (\n          <LineInput\n            key={name}\n            value={v === undefined ? '' : v}\n            type={type}\n            name={name}\n            choices={choices}\n            onChange={handleChange}\n          />\n        );\n      })}\n      <div className=\"InputRow\">\n        <div style={{textAlign: 'right'}}>\n          {record.id && <button onClick={addRecord} disabled={modified}>New Record</button>}\n          <button onClick={onSave} disabled={!modified}>{saveCaption}</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useCallback, useState, useMemo } from 'react';\nimport { FixedSizeList as List } from 'react-window';\nimport storage, { useRecord } from '../../storage';\n\nfunction itemKey(index, data) {\n  return data[index];\n}\n\nconst Row = React.memo(({ data, index, style, setSelected, selected }) => {\n  const key = data[index];\n  const item = useRecord(key);\n\n  const handleClick = useCallback(() => {\n    setSelected(key);\n  }, [key, setSelected]);\n\n  return (\n    <div className={`GridRow${selected === key?' selected':''}`} style={style} onClick={handleClick}>\n      <div style={{ width: 120 }}>{item.PN}</div>\n      <div style={{ width: 120 }}>{item.DATE}</div>\n      <div style={{ flex: 1}}>{item.NAME}</div>\n    </div>\n  );\n});\n\nexport default function Records({ records, setSelected, selected }) {\n  const [filter, setFilter] = useState('');\n  const updateFilter = useCallback((e) => {\n    setFilter(e.target.value);\n  }, []);\n\n  const filteredRecords = useMemo(() => {\n    const f = filter.trim().toLowerCase();\n    if (!f) return records;\n    return records.filter((id) => {\n      const name = storage.getRecord(id).NAME;\n      const pn = (storage.getRecord(id).PN || '').trim().toLowerCase();\n      if (!name) return false;\n      return pn === f || name.toLowerCase().indexOf(f) >= 0;\n    });\n  }, [records, filter]);\n\n  function ItemRow(props) {\n    return <Row {...props} setSelected={setSelected} selected={selected} />\n  };\n\n  let Body = null;\n  if (filteredRecords.length === 0) {\n    Body = (\n      <div style={{\n        display: 'flex',\n        height: 300,\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}>\n        <div className=\"NoRecords\">No Records Found</div>\n      </div>\n    );\n  } else {\n    Body = (\n      <List\n        height={240}\n        itemCount={filteredRecords.length}\n        itemData={filteredRecords}\n        itemKey={itemKey}\n        itemSize={30}\n      >\n        {ItemRow}\n      </List>\n    );\n  }\n\n  return (\n    <div className=\"Records\">\n      <div className=\"Header\">\n        <b>Available Records</b>\n        <input value={filter} onChange={updateFilter} placeholder=\"Search\" />\n        {`Records ${filteredRecords.length}/${records.length}`}\n      </div>\n      {Body}\n    </div>\n  );\n}","import { format, distanceInWordsStrict } from 'date-fns';\nimport numeral from 'numeral';\n\nconst GENDER_MALE = 'Male';\n\nconst title = (Mr, Mrs, Ms) => (data) => {\n  if (data.GENDER === GENDER_MALE) {\n    return Mr;\n  } else if (data.MARRIED) {\n    return Mrs;\n  } else {\n    return Ms;\n  }\n}\n\nconst gender = (he, she) => (data) => {\n  if (data.GENDER === GENDER_MALE) {\n    return he;\n  }\n  return she;\n}\n\nconst date = (fmt) => (data, param='DATE') => {\n  const d = new Date(data[param] || Date.now());\n  return format(d, fmt);\n}\n\nconst age = () => (data, dob='DOB', now='DATE') => {\n  const dobDate = new Date(data[dob] || '2010-01-01');\n  const nowDate = new Date(data[now] || Date.now());\n\n  return distanceInWordsStrict(dobDate, nowDate);\n}\n\nconst specials = {\n  AGE: age(),\n\n  Mr: title('Mr.', 'Mrs.', 'Ms.'),\n  He: gender('He', 'She'),\n  he: gender('he', 'she'),\n  HE: gender('HE', 'SHE'),\n  Him: gender('Him', 'Her'),\n  him: gender('him', 'her'),\n  HIM: gender('HIM', 'HER'),\n  His: gender('His', 'Her'),\n  his: gender('his', 'her'),\n  HIS: gender('HIS', 'HER'),\n\n  DATE: date('YYYY-MM-DD'),\n  TIME: date('HH:mm:ss'),\n  YY: date('YY'),\n  YYYY: date('YYYY'),\n  A: date('A'),\n  a: date('a'),\n  aa: date('aa'),\n  M: date('M'),\n  MM: date('MM'),\n  MMM: date('MMM'),\n  MMMM: date('MMMM'),\n  D: date('D'),\n  Do: date('Do'),\n  DD: date('DD'),\n  d: date('d'),\n  dd: date('dd'),\n  ddd: date('ddd'),\n  dddd: date('dddd'),\n  i: date('i'),\n  H: date('H'),\n  HH: date('HH'),\n  h: date('h'),\n  hh: date('hh'),\n  mm: date('mm'),\n  ss: date('ss'),\n}\n\nexport default function process(template, data, structure) {\n  // First replace all specials values from the template\n  return template.replace(/{{([^}]*)}}/g, (match, first) => {\n    const [field, ...params] = first.split(':');\n    const special = specials[field];\n    if (special) {\n      return special(data, ...params);\n    }\n\n    if (structure[field]) {\n      if (params[0] === '#') {\n        // Use number formatting\n        const fmt = params[1];\n        const v = numeral(data[field]);\n\n        return fmt ? v.format(fmt) : v.value();\n      }\n      // Can return a ordered/unorderd list based on the params\n      else if (params[0] === '*' || /[0-9]+[.]/.test(params[0])) {\n        const v = data[field] || '';\n        return v.split('\\n')\n          .map(v => v.trim())\n          .filter(v => v.length > 0)\n          .map(v => `${params[0]} ${v}`)\n          .join('\\n');\n      }\n      return data[field];\n    }\n\n    return match;\n  });\n}\n","import { useMemo } from 'react';\nimport process from './process';\n\nexport default function useMarkDown(source, structure, data = null) {\n  const markdown = useMemo(() => {\n    const r = structure.reduce((res, s) => {\n      res.structure[s.name] = true;\n      res.data[s.name] = s.sample;\n      return res;\n    }, { structure: {}, data: {}});\n\n    return process(source, data || r.data, r.structure);\n  }, [source, structure, data]);\n\n  return markdown;\n}\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { useMarkDown } from './processor';\n\nconst onPrint = () => window.print();\n\nexport default function Preview({ source, structure, record, printable }) {\n  const markdown = useMarkDown(source, structure, record);\n\n  return (\n    <div className=\"Preview\">\n      {printable && (\n        <button\n          style={{position: 'absolute', right: 20, top: 20 }}\n          onClick={onPrint}\n        >\n          Print\n        </button>\n      )}\n      <div className=\"Paper\">\n        <ReactMarkdown source={markdown} />\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useContext, useEffect, useRef, useCallback } from 'react';\n\nconst ToolBarContext = React.createContext();\n\nlet seq = 0;\nfunction useSeq() {\n  const n = useRef(null);\n  if (n.current === null) {\n    seq += 1;\n    n.current = seq;\n  }\n\n  return n.current;\n}\n\n\nexport function useToolBar(Component, dependencies = []) {\n  const registerTools = useContext(ToolBarContext);\n  const groupSeq = useSeq();\n\n  useEffect(() => {\n    return registerTools(groupSeq, Component);\n  // eslint-disable-next-line\n  }, dependencies);\n}\n\nexport default function ToolBar({ title, ...other }) {\n  const [tools, updateTools] = useState([]);\n\n  const registerTools = useCallback((seq, Group) => {\n    updateTools(prev => {\n      const res = prev.slice();\n      res.push({ seq, Group });\n      res.sort((a, b) => b.seq - a.seq);\n      return res;\n    });\n\n    return () => {\n      updateTools(prev => prev.filter(p => p.seq !== seq));\n    }\n  }, []);\n\n  return (\n    <ToolBarContext.Provider value={registerTools}>\n      {tools.length > 0 && (\n        <div className=\"ToolBar\">\n          <h3>{title}</h3>\n          {tools.map(({ seq, Group }) => (\n            <div key={seq} className=\"ToolBarGroup\"><Group /></div>\n          ))}\n        </div>\n      )}\n      <React.Fragment {...other} />\n    </ToolBarContext.Provider>\n  )\n}\n","import React, { useState, useCallback, useMemo } from 'react';\nimport { format } from 'date-fns';\nimport storage, { useConfig } from '../../storage';\nimport { Download, Upload } from '../../file';\n\nimport Form from './Form';\nimport Records from './Records';\nimport Preview from '../../Preview';\nimport { useToolBar } from '../../ToolBar';\n\nfunction createNewRecord(config) {\n  return (prev = {}) => {\n    const rec = config.structure.reduce((res, st) => {\n      let v = '';\n      if (st.sample === undefined || st.sample === '') {\n        v = prev[st.name];\n      } else {\n        v = st.sample;\n      }\n      res[st.name] = v;\n      return res;\n    }, {});\n\n    rec.DATE = format(new Date(), 'YYYY-MM-DD');\n    rec.id = undefined;\n    rec.PN = '';\n    rec.NAME = '';\n    rec.DOB = '';\n    return rec;\n  };\n}\n\nfunction createBackup() {\n  const config = storage.loadConfig();\n  const records = storage.loadRecords();\n  const data = {};\n  for (let i = 0; i < records.length; i += 1) {\n    const record = storage.getRecord(records[i]);\n    data[record.id] = record;\n  }\n\n  const filename = format(new Date(), 'YYYY-MM-DD')\n  return {\n    name: `Formish-Backup-${filename}.json`,\n    data: JSON.stringify({ config, records, data }),\n    type: 'application/json'\n  };\n}\n\nfunction createRestore(setRecords) {\n  return (data) => {\n    try {\n      const obj = JSON.parse(data);\n      if (!obj.config) throw new Error(`No configuration found`);\n      if (!Array.isArray(obj.config.structure)) throw new Error('No valid config structure found');\n      if (!obj.config.markdown) throw new Error('No configuration template found');\n      if (!obj.records || !Array.isArray(obj.records)) throw new Error('No data records found');\n      if (!obj.data || typeof obj.data !== 'object') throw new Error('No data content found');\n      if (window.confirm('Are you sure you want to replace the existing data ? This action is irreversible.')) {\n        // Remove all records that don't have any data at all\n        const existingRecords = obj.records.filter((id) => {\n          const record = obj.data[id];\n          if (!record || record.id !== id) return false;\n          storage.saveRecord(record);\n          return true;\n        });\n\n        storage.saveRecords(existingRecords);\n        storage.saveConfig(obj.config);\n\n        setRecords(existingRecords);\n      }\n    } catch (err) {\n      window.alert(`Restoration failed: ${err.message}`);\n    }\n  }\n}\n\nexport default function Home() {\n  const config = useConfig();\n  const createRecord = useMemo(() => {\n    return createNewRecord(config);\n  }, [config]);\n\n  const [records, setRecords] = useState(storage.loadRecords)\n  const [record, setRecord] = useState(createRecord);\n  const [modified, setModified] = useState(false);\n\n  const handleChange = useCallback((changedRecord) => {\n    setRecord(changedRecord);\n    setModified(true);\n  }, []);\n\n  const addRecord = useCallback(() => {\n    setRecord(prev => createRecord(prev));\n  }, [createRecord]);\n\n  const handleSelect = useCallback((id) => {\n    if (!modified || window.confirm('Your changes are not saved. Ignore changes ?')) {\n      setRecord(storage.getRecord(id));\n      setModified(false);\n    }\n  }, [modified]);\n\n  const handleSave = useCallback(() => {\n    const records = storage.saveRecord(record);\n    if (!record.id) {\n      setRecords(records);\n    }\n    setRecord(storage.getRecord(records[0]));\n    setModified(false);\n  }, [record]);\n\n  useToolBar(() => (\n    <>\n      <Download onPrepare={createBackup}>Backup</Download>\n      <Upload onChange={createRestore(setRecords)}>Restore</Upload>\n    </>\n  ), [setRecords]);\n\n  return (\n    <div className=\"Full\">\n      <div className=\"Half\">\n        <Form\n          record={record}\n          onSave={handleSave}\n          onChange={handleChange}\n          modified={modified}\n          addRecord={addRecord}\n        />\n      </div>\n      <div className=\"Half\">\n        <Records\n          records={records}\n          selected={record.id}\n          setSelected={handleSelect}\n        />\n        <Preview\n          record={record}\n          source={config.markdown}\n          structure={config.structure}\n          printable={record.id && !modified}\n        />\n      </div>\n    </div>\n  );\n}","import Home from './Home';\n\nexport default Home;\n","import React, { useCallback } from 'react';\nimport { types, TextInput, SelectInput } from '../../inputs';\n\nexport default function Structure({ value, onChange }) {\n  const handleChange = useCallback((name, value) => {\n    onChange((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  }, [onChange]);\n\n  const Sample = types.find(s => s.id === value.type);\n\n  return (\n    <tr>\n      <td>\n        <SelectInput name=\"type\" value={value.type} onChange={handleChange} choices={types.map(t => t.id)} />\n      </td>\n      <td>\n        <TextInput name=\"name\" onChange={handleChange} value={value.name} />\n      </td>\n      <td>\n      {value.type === 'Choices' && (\n        <TextInput name=\"choices\" onChange={handleChange} value={value.choices} />\n      )}\n      </td>\n      <td>\n        {Sample && (\n          <Sample.C name=\"sample\" onChange={handleChange} value={value.sample} choices={value.choices} />\n        )}\n      </td>\n    </tr>\n  );\n}","import React from 'react';\n\nexport default function Help() {\n  return (\n    <div className=\"Help\">\n      <h2>Template Formatting Help</h2>\n      <p>The template uses <a href=\"https://www.markdownguide.org/cheat-sheet/\">Mark Down</a>.</p>\n      <ul>\n        <li><b># Heading1</b> For Top Level heading</li>\n        <li><b>## Heading 2</b> Second level heading</li>\n        <li><b>### Heding 3</b>Third level heading</li>\n        <li><b>**Bold**</b></li>\n        <li><b>*Italic*</b></li>\n        <li><b>***Bold Italic***</b></li>\n        <li><b>---</b> For a horizontal line</li>\n        <li><b>&nbsp;</b> Followed by 2 spaces for forced blank line separation</li>\n      </ul>\n      <p>\n        You could use data entered via form by placing them\n        within double curly brackets like <b>{'{{NAME}}'}</b>.\n        Use the name of the field (case-sensitive) like <b>PN</b>, <b>DATE</b> or\n        any other custom ones that you have created.\n      </p>\n      <h3>Special Placeholders</h3>\n      <p>\n        Apart from fields, there are various other special placeholders\n        that you could use.\n        <ul>\n          <li>\n            <b>His, He, Him</b>\n            : These placeholder works with GENDER field.<br/>\n            Example: <b>{'{{He}}'} is in sound health</b>\n          </li>\n          <li>\n            <b>Mr</b>\n            : This place holder works with GENDER and MARRIED field.\n          </li>\n          <li><b>YYYY</b>: Display 4 digit year 2018, 2019</li>\n          <li><b>YY</b>: Display 2 digit year 18, 19</li>\n          <li><b>Do</b>: Display date of month with suffix 1st, 2nd, ...</li>\n          <li><b>DD</b>: Display 2 digit date of month 01, 02, ...</li>\n          <li><b>ddd</b>: Display 3 character week day Sun, Mon, ...</li>\n          <li><b>dddd</b>: Display full week day Sunday, Monday, ...</li>\n          <li><b>MM</b>: Display 2 digit month 01, 02, ... 11, 12</li>\n          <li><b>MMM</b>: Dislay 3 character month Jan, Feb, ...</li>\n          <li>Example: <b>{'{{Do}} {{MMM}}, {{YYYY}}'}</b> becomes <b>1st Jan, 2019</b></li>\n          <li>\n            <b>AGE</b>\n            : This is a special place holder that uses DOB and DATE field to calculate age.\n            Example: <b>{'{{AGE}}'} old</b> becomes <b>99 years old</b>\n          </li>\n        </ul>\n        <h3>Using list values</h3>\n        <p>Enter list data in multiple lines and use specical prefixes to display them in bullets or numbering</p>\n        <ul>\n          <li><b>{'{{MEDICATIONS:*}}'}</b> will display medications as bulleted list</li>\n          <li><b>{'{{MEDICATIONS:1.}}'}</b> will display medications as numbered list</li>\n        </ul>\n        <h3>Formatting numbers</h3>\n        <p>You could format number values</p>\n        <ul>\n          <li><b>{'{{PRICE:#:0.00}}'}</b> will display number with 2 decimal places.</li>\n          <li>Example: <b>{'{{PRICE:#:0,0}}'}</b> will display number with comma separation</li>\n        </ul>\n      </p>\n    </div>\n  )\n}","import React, { useState, useCallback } from 'react';\nimport Structure from './Structure';\nimport Help from './Help';\nimport storage from '../../storage';\nimport Preview from '../../Preview';\nimport { useToolBar } from '../../ToolBar';\nimport { Download, Upload } from '../../file';\n\nfunction importTemplate(setStructure, setSource) {\n  return (data) => {\n    try {\n      const config = JSON.parse(data);\n      if (!config.markdown || typeof config.markdown !== 'string') throw new Error('No template content found');\n      if (!config.structure || !Array.isArray(config.structure)) throw new Error('No template definition found');\n      if (window.confirm('Are you sure you want to replace the existing template with the new one ?')) {\n        storage.saveConfig(config);\n        setStructure(config.structure);\n        setSource(config.markdown);\n      }\n    } catch (err) {\n      window.alert(`Failed to import template: ${err.message}`);\n    }\n  }\n}\n\nfunction exportTemplate(structure, markdown) {\n  return () => {\n    return {\n      name: `Formish-Template.json`,\n      data: JSON.stringify({ structure, markdown }),\n      type: 'application/json',\n    };\n  }\n}\n\nexport default function Designer() {\n  const data = storage.loadConfig();\n  const [help, setHelp] = useState(false);\n  const [structure, setStructure] = useState(data.structure);\n  const [source, setSource] = useState(data.markdown);\n  const [modified, setModified] = useState(false);\n\n  const toggleHelp = useCallback(() => setHelp(h => !h), []);\n  const handleSource = useCallback((e) => {\n    setSource(e.target.value);\n    setModified(true);\n  }, []);\n\n  const handleSave = useCallback(() => {\n    storage.saveConfig({\n      markdown: source,\n      structure,\n    });\n    setModified(false);\n  }, [structure, source]);\n\n  const handleStructure = useCallback((idx) => {\n    return (value) => {\n      setStructure(prev => {\n        return prev.map((v, i) => i === idx ? value(v) : v);\n      });\n      setModified(true);\n    };\n  }, []);\n\n  const handleAdd = useCallback(() => {\n    setStructure(prev => prev.concat({ type: 'Text', name: `FIELD_${prev.length + 1}`}));\n    setModified(true);\n  }, []);\n\n  useToolBar(() => (\n    <>\n      <Download onPrepare={exportTemplate(structure, source)}>Export Template</Download>\n      <Upload onChange={importTemplate(setStructure, setSource)}>Import Template</Upload>\n    </>\n  ));\n\n  return (\n    <div className=\"App\">\n      <div className=\"Full\">\n        <div className=\"Half Editor\" style={{position: 'relative'}}>\n          <button style={{position: 'absolute', right: 10, top: 10}} onClick={toggleHelp}>\n            {help ? 'Close' : 'Help'}\n          </button>\n          <div className=\"Full\" style={{ padding: '10px', backgroundColor: '#eee' }}>\n            {help\n              ? <Help />\n              : <textarea style={{ outline: 0 }} value={source} onChange={handleSource} />\n            }\n          </div>\n          <table>\n            <tbody>\n              {structure.map((s, i) => <Structure key={i} value={s} onChange={handleStructure(i)} />)}\n              <tr style={{ backgroundColor: 'black' }}>\n                <td>\n                  <button style={{ fontSize: '14pt' }} onClick={handleAdd}>Add</button>\n                </td>\n                <td colSpan=\"2\" />\n                <td align=\"right\">\n                  {modified && <button style={{ fontSize: '14pt' }} onClick={handleSave}>Save</button>}\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <div className=\"Half\">\n          <Preview source={source} structure={structure} record={null} />\n        </div>\n      </div>\n    </div>\n  );\n}","import Designer from './Designer';\n\nexport default Designer;\n","import React, { useState } from 'react';\nimport Home from './screens/Home';\nimport Designer from './screens/Designer';\n\nimport { useToolBar } from './ToolBar';\n\nimport './App.css';\n\nfunction App() {\n  const [edit, setEdit] = useState(false);\n\n  useToolBar(() => (\n    <>\n      <button onClick={() => setEdit(!edit)}>{edit ? 'Reports' : 'Design'}</button>\n    </>\n  ), [edit])\n\n  return edit ? <Designer /> : <Home />;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport ToolBar from './ToolBar';\n\nReactDOM.render((\n  <ToolBar title=\"Formish\">\n    <App />\n  </ToolBar>\n), document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}