(this["webpackJsonpdischarge-report"]=this["webpackJsonpdischarge-report"]||[]).push([[0],{124:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAABBNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXBNTTpEb2N1bWVudElEPnhtcC5kaWQ6RERCMUIwOUY4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDY8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpEZXJpdmVkRnJvbSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgIDxzdFJlZjppbnN0YW5jZUlEPnhtcC5paWQ6RTUxNzhBMkE5OUEwMTFFMjlBMTVCQzEwNDZBODkwNEQ8L3N0UmVmOmluc3RhbmNlSUQ+CiAgICAgICAgICAgIDxzdFJlZjpkb2N1bWVudElEPnhtcC5kaWQ6RTUxNzhBMkI5OUEwMTFFMjlBMTVCQzEwNDZBODkwNEQ8L3N0UmVmOmRvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDx4bXBNTTpJbnN0YW5jZUlEPnhtcC5paWQ6RERCMUIwOUU4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDY8L3htcE1NOkluc3RhbmNlSUQ+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgqBOjEgAAABhUlEQVQ4EYWTvUpDQRCF700UTbSJhQo+QPCnU4QgITY+SPABtPUB7IRgFS2ij6ClXUBrsbQTo42IpRjB6PqdyWxYAuLAYc7MnJ2d3bs3y7AQQkFeBq+DM/AAvh3iytWHqmQNSVuML4EOSC02SHPSlHyz4cYkyuA6Vf3DpS3HaTR23LkL3wW34APcO8SVU60LZB1rAGkocmv7aDrOIph0iMex2/BojQkWNEejZNmX8888z/tJ/oUVucdRo7Cp8R+9XR9fVRZfBPkYil6rkpdW9ijxwGgIT/gpF8XdFJpRs5w0QFrZQJ8huGYGb+f0+C8nzawX7Q30PJjDN5zbEZxrSu1uR8BvgwqQ9VQ81SzYO3gFm8Oa3YXdQxLXqD+DaCdqsO5RC3/u/A5fG1t4Q+7H63qhsg3TQI4tDGELfwAuwVLSYNnrcvELtGI9Nrmi+AZ2wCoogHjzFbhq0S4gVtMRhj8EbeBHUYFfiDvA5z2v0Q+T/OhnSpusINoH04lQT3sPrCU5W/MLjZxHEeHXmq0AAAAASUVORK5CYII="},127:function(e,t,n){e.exports=n(371)},132:function(e,t,n){},360:function(e,t){},370:function(e,t,n){},371:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(119),l=n.n(c),o=(n(132),n(3)),i=n(14),u=[{name:"PN",type:"Text",searchable:!0},{name:"DATE",type:"Date",searchable:!0},{name:"NAME",type:"Text",searchable:!0},{name:"DOB",type:"Date"},{name:"GENDER",type:"Choices",choices:"Male,Female"},{name:"MARRIED",type:"Yes/No"},{name:"DOCTOR",type:"Text"},{name:"DIAGNOSIS",type:"List"},{name:"CONDITION",type:"Text"},{name:"MEDICATIONS",type:"List"}],s="\n# Report\n### {{dddd}}, {{Do}} {{MMM}}, {{YYYY}}\n\nReport for {{Mr}} {{NAME}}. {{He}} has been diagnosed with **{{DIAGNOSIS}}**.\n{{His}} condition is {{CONDITION}}.\n\n{{He}} is {{AGE}} old as per our records.\n\n{{MEDICATIONS:1.}}\n\n&nbsp;".concat("  ","\n................................","  ","\n{{DOCTOR}}\n"),m={},d={loadConfig:function(){try{var e=JSON.parse(localStorage.getItem("configuration"));if(null===e||!e.structure||!e.markdown)throw new Error("Invalid data");return e.structure.forEach((function(e){"PN"!==e.name&&"NAME"!==e.name&&"DATE"!==e.name||void 0===e.searchable&&(e.searchable=!0)})),e}catch(t){return console.log("Error",t),{structure:u,markdown:s}}},saveConfig:function(e){localStorage.setItem("configuration",JSON.stringify(e))},loadRecords:function(){try{var e=JSON.parse(localStorage.getItem("records"));if(!Array.isArray(e))throw new Error("Invalid data");return e}catch(t){return[]}},saveRecords:function(e){if(!Array.isArray(e))throw new Error("Records are meant to be an array");localStorage.setItem("records",JSON.stringify(e))},getRecord:function(e){try{var t=JSON.parse(localStorage.getItem("rec-".concat(e)));if(!t)throw new Error("Invalid data");return t}catch(n){return{}}},saveRecord:function(e){var t=e;if(e.id){localStorage.setItem("rec-".concat(e.id),JSON.stringify(e));var n=m[e.id];return n&&n.forEach((function(t){return t(e)})),[e.id]}var a=d.loadRecords(),r=Date.now();return t=Object.assign({},e,{id:r}),console.log("Saving record",r,t),localStorage.setItem("rec-".concat(r),JSON.stringify(t)),a.unshift(r),d.saveRecords(a),a},listen:function(e,t){var n=m[e],a=n||[];return a!==n&&(m[e]=a),a.push(t),function(){var n=a.indexOf(t);n>=0&&(a.splice(n,1),0===a.length&&delete m[e])}}};function f(){return d.loadConfig()}var E=d,h=n(56),b=n.n(h),g=n(120),p=n(2);function v(e){var t=e.onChange,n=Object(p.a)(e,["onChange"]),c=Object(a.useRef)(),l=Object(a.useCallback)((function(){c.current.click()}),[]),o=Object(a.useCallback)((function(e){if(e.target.files.length>0){var n=new FileReader;n.onload=function(e){t(n.result)},n.readAsText(e.target.files[0])}}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{ref:c,onChange:o,type:"file",style:{display:"none"}}),r.a.createElement("button",Object.assign({},n,{onClick:l})))}function C(e){var t=e.onPrepare,n=Object(p.a)(e,["onPrepare"]),c=Object(a.useState)(0),l=Object(o.a)(c,2),i=l[0],u=l[1],s=Object(a.useState)(null),m=Object(o.a)(s,2),d=m[0],f=m[1],E=Object(a.useCallback)(Object(g.a)(b.a.mark((function e(){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(1),e.next=3,t();case 3:n=e.sent,a=new Blob([n.data],{type:n.type}),f({blob:a,name:n.name});case 6:case"end":return e.stop()}}),e)}))),[t]),h=Object(a.useCallback)((function(){u(0),f(null)}),[]);return d?r.a.createElement("button",null,r.a.createElement("a",{href:URL.createObjectURL(d.blob),onClick:h,download:d.name},"Download ".concat(d.name))):0===i?r.a.createElement("button",Object.assign({},n,{onClick:E})):1===i?r.a.createElement("button",Object.assign({},n,{disabled:!0})):void 0}var A=n(13),O=n(30);function w(e){return Object(a.useCallback)((function(t){return e(t.target.name,t.target.value)}),[e])}function y(e){var t=e.onChange,n=Object(p.a)(e,["onChange"]),a=w(t);return r.a.createElement("input",Object.assign({type:"text",onChange:a},n))}function j(e){var t=e.onChange,n=e.choices,a=Object(p.a)(e,["onChange","choices"]),c=w(t),l="boolean"!==typeof a.value?a.value:a.value?"Yes":"No";return r.a.createElement("div",{className:"Radio"},n.map((function(e){return r.a.createElement("label",{key:e},r.a.createElement("input",Object.assign({},a,{type:"radio",value:e,checked:l===e,onChange:c})),r.a.createElement("span",null,e))})))}function N(e){var t=e.onChange,n=e.label,c=Object(p.a)(e,["onChange","label"]),l=function(e){return Object(a.useCallback)((function(t){return e(t.target.name,t.target.checked)}),[e])}(t),o=Boolean(c.value);return r.a.createElement("div",{className:"Radio"},r.a.createElement("label",null,r.a.createElement("input",Object.assign({},c,{type:"checkbox",checked:o,onChange:l})),r.a.createElement("span",null,n)))}var I=["Yes","No"];function S(e){var t=e.onChange,n=e.choices,a=Object(p.a)(e,["onChange","choices"]),c=w(t);return r.a.createElement("select",Object.assign({onChange:c},a),n.map((function(e){return r.a.createElement("option",{key:e},e)})))}function R(e){var t=e.onChange,n=e.choices,a=Object(p.a)(e,["onChange","choices"]),c=n.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0}));return 0===c.length?r.a.createElement("span",null,"No choice available"):c.length<4?r.a.createElement(j,Object.assign({onChange:t,choices:c},a)):r.a.createElement(S,Object.assign({onChange:t,choices:c},a))}R.defaultProps={choices:""};var D=[{id:"Text",C:y},{id:"Date",C:function(e){var t=e.onChange,n=Object(p.a)(e,["onChange"]),a=w(t);return r.a.createElement("input",Object.assign({type:"date",onChange:a},n))}},{id:"List",C:function(e){var t=e.onChange,n=Object(p.a)(e,["onChange"]),a=w(t);return r.a.createElement("textarea",Object.assign({onChange:a},n))}},{id:"Yes/No",C:function(e){var t=e.onChange,n=Object(p.a)(e,["onChange"]),c=Object(a.useCallback)((function(e,n){t(e,"Yes"===n)}),[t]);return r.a.createElement(j,Object.assign({},n,{onChange:c,choices:I}))}},{id:"Choices",C:R}];function M(e){var t=e.type,n=e.name,a=e.value,c=e.choices,l=e.onChange,o=D.find((function(e){return e.id===t})).C;return r.a.createElement("div",{className:"InputRow"},r.a.createElement("label",null,r.a.createElement("span",null,n),r.a.createElement(o,{name:n,choices:c,onChange:l,value:a})))}function k(e){var t=e.record,n=e.onChange,c=e.onSave,l=e.modified,o=e.addRecord,i=f(),u=Object(a.useCallback)((function(e,t){n((function(n){return Object(O.a)({},n,Object(A.a)({},e,t))}))}),[n]),s=t.id?"Update":"Create";return r.a.createElement("div",{className:"RecordForm"},i.structure.map((function(e){var n=e.type,a=e.name,c=e.choices,l=t[a];return r.a.createElement(M,{key:a,value:void 0===l?"":l,type:n,name:a,choices:c,onChange:u})})),r.a.createElement("div",{className:"InputRow"},r.a.createElement("div",{style:{textAlign:"right"}},t.id&&r.a.createElement("button",{onClick:o,disabled:l},"New Record"),r.a.createElement("button",{onClick:c,disabled:!l},s))))}var Y=n(125);function T(e,t){return t[e]}var H=r.a.memo((function(e){var t=e.data,n=e.index,c=e.style,l=e.setSelected,i=e.selected,u=e.fields,s=e.widths,m=t[n],f=function(e){var t=Object(a.useState)(d.getRecord(e)),n=Object(o.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){return d.listen(e,c)}),[e]),r}(m),E=Object(a.useCallback)((function(){l(m)}),[m,l]);return r.a.createElement("div",{className:"GridRow".concat(i===m?" selected":""),style:c,onClick:E},u.map((function(e,t){return r.a.createElement("div",{key:e.name,style:{paddingLeft:"5px",width:"".concat(100*s[t],"%")}},f[e.name])})))}));function x(e){var t=e.records,n=e.setSelected,c=e.selected,l=f().structure.filter((function(e){return e.searchable})),i=Object(a.useState)(""),u=Object(o.a)(i,2),s=u[0],m=u[1],d=Object(a.useCallback)((function(e){m(e.target.value)}),[]),h=Object(a.useMemo)((function(){var e={};return t.forEach((function(t){e[t]=E.getRecord(t)})),e}),[t]),b=Object(a.useMemo)((function(){var e=l.map((function(e){return 0}));console.log("Records",t);for(var n=function(n){var a=h[t[n]];l.forEach((function(t,n){var r=a[t.name];e[n]=Math.max(e[n],String(r).length)}))},a=0;a<t.length;a++)n(a);console.log("Widths",e);var r=e.reduce((function(e,t){return e+t}),0);return e.map((function(e){return e/r}))}),[t,l]),g=Object(a.useMemo)((function(){var e=s.trim().toLowerCase();if(!e)return t;var n,a=(n=e,function(e,t){return t.map((function(t){return e[t.name]})).join("|").toLowerCase().indexOf(n)>=0});return e.startsWith(":")?a=e.length>1&&e.endsWith(":")?function(e){return function(t,n){return n.reduce((function(n,a){return n||function(e,t){return!!e&&e.toLowerCase()===t}(t[a.name],e)}),!1)}}(e.substr(1,e.length-2)):function(e){return function(t,n){return n.reduce((function(n,a){return n||function(e,t){return!!e&&e.toLowerCase().startsWith(t)}(t[a.name],e)}),!1)}}(e.substr(1)):e.endsWith(":")&&(a=function(e){return function(t,n){return n.reduce((function(n,a){return n||function(e,t){return!!e&&e.toLowerCase().endsWith(t)}(t[a.name],e)}),!1)}}(e.substr(0,e.length-1))),t.filter((function(e){var t=h[e];return a(t,l)}))}),[t,s,l]),p=Object(a.useCallback)((function(){var e="formish-records-".concat((new Date).toISOString(),".csv"),t=E.loadConfig().structure.map((function(e){return e.name})),n=t.map((function(e){return JSON.stringify(e)})).join(",")+"\r\n";g.forEach((function(e){var a=h[e];n+=t.map((function(e){var t=a[e];return void 0===t||null===t?"":JSON.stringify(t)})).join(",")+"\r\n"}));var a=document.createElement("a");a.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(n)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}),[g]);function v(e){return r.a.createElement(H,Object.assign({},e,{setSelected:n,selected:c,fields:l,widths:b}))}var C=null;return C=0===g.length?r.a.createElement("div",{style:{display:"flex",height:300,alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{className:"NoRecords"},"No Records Found")):r.a.createElement(Y.a,{height:240,itemCount:g.length,itemData:g,itemKey:T,itemSize:30},v),r.a.createElement("div",{className:"Records"},r.a.createElement("div",{className:"Header"},r.a.createElement("b",null,"Available Records"),r.a.createElement("input",{value:s,onChange:d,placeholder:"Search"}),"Records ".concat(g.length,"/").concat(t.length),r.a.createElement("div",{style:{flex:1,textAlign:"right"}},r.a.createElement("button",{onClick:p},"Download CSV"))),C)}var F,B,J,G=n(121),L=n.n(G),Z=n(126),U=n(122),P=n(123),Q=n.n(P),W=function(e,t){return function(n){return"Male"===n.GENDER?e:t}},X=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DATE",a=new Date(t[n]||Date.now());return Object(i.format)(a,e)}},V={AGE:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOB",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DATE",a=new Date(e[t]||"2010-01-01"),r=new Date(e[n]||Date.now());return Object(i.distanceInWordsStrict)(a,r)},Mr:(F="Mr.",B="Mrs.",J="Ms.",function(e){return"Male"===e.GENDER?F:e.MARRIED?B:J}),He:W("He","She"),he:W("he","she"),HE:W("HE","SHE"),Him:W("Him","Her"),him:W("him","her"),HIM:W("HIM","HER"),His:W("His","Her"),his:W("his","her"),HIS:W("HIS","HER"),DATE:X("YYYY-MM-DD"),TIME:X("HH:mm:ss"),YY:X("YY"),YYYY:X("YYYY"),A:X("A"),a:X("a"),aa:X("aa"),M:X("M"),MM:X("MM"),MMM:X("MMM"),MMMM:X("MMMM"),D:X("D"),Do:X("Do"),DD:X("DD"),d:X("d"),dd:X("dd"),ddd:X("ddd"),dddd:X("dddd"),i:X("i"),H:X("H"),HH:X("HH"),h:X("h"),hh:X("hh"),mm:X("mm"),ss:X("ss")};function z(e,t,n){return e.replace(/{{([^}]*)}}/g,(function(e,a){var r=a.split(":"),c=Object(U.a)(r),l=c[0],o=c.slice(1),i=V[l];if(i)return i.apply(void 0,[t].concat(Object(Z.a)(o)));if(n[l]){if("#"===o[0]){var u=o[1],s=Q()(t[l]);return u?s.format(u):s.value()}return"*"===o[0]||/[0-9]+[.]/.test(o[0])?(t[l]||"").split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length>0})).map((function(e){return"".concat(o[0]," ").concat(e)})).join("\n"):function(e){return!0===e?"Yes":!1===e?"No":e}(t[l])}return e}))}var q=function(){return window.print()};function K(e){var t=e.source,n=e.structure,c=e.record,l=e.printable,o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Object(a.useMemo)((function(){var a=t.reduce((function(e,t){return e.structure[t.name]=!0,e.data[t.name]=t.sample,e}),{structure:{},data:{}});return z(e,n||a.data,a.structure)}),[e,t,n]);return r}(t,n,c);return r.a.createElement("div",{className:"Preview"},l&&r.a.createElement("button",{style:{position:"absolute",right:20,top:20},onClick:q},"Print"),r.a.createElement("div",{className:"Paper"},r.a.createElement(L.a,{source:o,escapeHtml:!1})))}var _=n(57),$=n(124),ee=n.n($),te=r.a.createContext(),ne=0;function ae(){var e=Object(a.useRef)(null);return null===e.current&&(ne+=1,e.current=ne),e.current}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(a.useContext)(te),r=ae();Object(a.useEffect)((function(){return n(r,e)}),t)}function ce(e){var t=e.title,n=Object(p.a)(e,["title"]),c=Object(a.useState)([]),l=Object(o.a)(c,2),i=l[0],u=l[1],s=Object(a.useCallback)((function(e,t){return u((function(n){var a=n.slice();return a.push({seq:e,Group:t}),a.sort((function(e,t){return t.seq-e.seq})),a})),function(){u((function(t){return t.filter((function(t){return t.seq!==e}))}))}}),[]);return r.a.createElement(te.Provider,{value:s},i.length>0&&r.a.createElement("div",{className:"ToolBar"},r.a.createElement("div",{className:"Brand"},r.a.createElement("a",{href:_.repository.url,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:ee.a,alt:"Github"})),r.a.createElement("h3",null,t),r.a.createElement("sub",null,"v",_.version)),i.map((function(e){var t=e.seq,n=e.Group;return r.a.createElement("div",{key:t,className:"ToolBarGroup"},r.a.createElement(n,null))}))),r.a.createElement(r.a.Fragment,n))}function le(){for(var e=E.loadConfig(),t=E.loadRecords(),n={},a=0;a<t.length;a+=1){var r=E.getRecord(t[a]);n[r.id]=r}var c=Object(i.format)(new Date,"YYYY-MM-DD");return{name:"Formish-Backup-".concat(c,".json"),data:JSON.stringify({config:e,records:t,data:n}),type:"application/json"}}function oe(e){return function(t){try{var n=JSON.parse(t);if(!n.config)throw new Error("No configuration found");if(!Array.isArray(n.config.structure))throw new Error("No valid config structure found");if(!n.config.markdown)throw new Error("No configuration template found");if(!n.records||!Array.isArray(n.records))throw new Error("No data records found");if(!n.data||"object"!==typeof n.data)throw new Error("No data content found");var a=new Set(E.loadRecords()),r=0;n.records.forEach((function(e){var t=n.data[e];t&&t.id===e&&(a.has(e)||(r+=1,E.saveRecord(t),a.add(t.id)))})),window.alert("".concat(r," records appended"));var c=Array.from(a.keys()).sort();console.log(c),E.saveRecords(c),e(c)}catch(l){window.alert("Load failed: ".concat(l.message))}}}function ie(e){return function(t){try{var n=JSON.parse(t);if(!n.config)throw new Error("No configuration found");if(!Array.isArray(n.config.structure))throw new Error("No valid config structure found");if(!n.config.markdown)throw new Error("No configuration template found");if(!n.records||!Array.isArray(n.records))throw new Error("No data records found");if(!n.data||"object"!==typeof n.data)throw new Error("No data content found");if(window.confirm("Are you sure you want to replace the existing data ? This action is irreversible.")){var a=n.records.filter((function(e){var t=n.data[e];return!(!t||t.id!==e)&&(E.saveRecord(t),!0)}));E.saveRecords(a),E.saveConfig(n.config),e(a)}}catch(r){window.alert("Restoration failed: ".concat(r.message))}}}var ue=function(){var e=f(),t=Object(a.useMemo)((function(){return function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.structure.reduce((function(e,n){var a="";return a=void 0===n.sample||""===n.sample?t[n.name]:n.sample,e[n.name]=a,e}),{});return n.DATE=Object(i.format)(new Date,"YYYY-MM-DD"),n.id=void 0,n.PN="",n.NAME="",n.DOB="",n}}(e)}),[e]),n=Object(a.useState)(E.loadRecords),c=Object(o.a)(n,2),l=c[0],u=c[1],s=Object(a.useState)(t),m=Object(o.a)(s,2),d=m[0],h=m[1],b=Object(a.useState)(!1),g=Object(o.a)(b,2),p=g[0],A=g[1],O=Object(a.useCallback)((function(e){h(e),A(!0)}),[]),w=Object(a.useCallback)((function(){h((function(e){return t(e)}))}),[t]),y=Object(a.useCallback)((function(e){p&&!window.confirm("Your changes are not saved. Ignore changes ?")||(h(E.getRecord(e)),A(!1))}),[p]),j=Object(a.useCallback)((function(){var e=E.saveRecord(d);d.id||u(e),h(E.getRecord(e[0])),A(!1)}),[d]);return re((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{onPrepare:le},"Backup"),r.a.createElement(v,{onChange:ie(u)},"Restore"),r.a.createElement(v,{onChange:oe(u)},"Load"))}),[u]),r.a.createElement("div",{className:"Full"},r.a.createElement("div",{className:"Half"},r.a.createElement(k,{record:d,onSave:j,onChange:O,modified:p,addRecord:w})),r.a.createElement("div",{className:"Half"},r.a.createElement(x,{records:l,selected:d.id,setSelected:y}),r.a.createElement(K,{record:d,source:e.markdown,structure:e.structure,printable:d.id&&!p})))};function se(e){var t=e.value,n=e.onChange,c=Object(a.useCallback)((function(e,t){n((function(n){return Object(O.a)({},n,Object(A.a)({},e,t))}))}),[n]),l=D.find((function(e){return e.id===t.type}));return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(N,{name:"searchable",label:"Search",value:t.searchable,onChange:c})),r.a.createElement("td",null,r.a.createElement(S,{name:"type",value:t.type,onChange:c,choices:D.map((function(e){return e.id}))})),r.a.createElement("td",null,r.a.createElement(y,{name:"name",onChange:c,value:t.name})),r.a.createElement("td",null,"Choices"===t.type&&r.a.createElement(y,{name:"choices",onChange:c,value:t.choices})),r.a.createElement("td",null,l&&r.a.createElement(l.C,{name:"sample",onChange:c,value:t.sample,choices:t.choices})))}function me(){return r.a.createElement("div",{className:"Help"},r.a.createElement("h2",null,"Template Formatting Help"),r.a.createElement("p",null,"The template uses ",r.a.createElement("a",{href:"https://www.markdownguide.org/cheat-sheet/"},"Mark Down"),"."),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"# Heading1")," For Top Level heading"),r.a.createElement("li",null,r.a.createElement("b",null,"## Heading 2")," Second level heading"),r.a.createElement("li",null,r.a.createElement("b",null,"### Heding 3"),"Third level heading"),r.a.createElement("li",null,r.a.createElement("b",null,"**Bold**")),r.a.createElement("li",null,r.a.createElement("b",null,"*Italic*")),r.a.createElement("li",null,r.a.createElement("b",null,"***Bold Italic***")),r.a.createElement("li",null,r.a.createElement("b",null,"---")," For a horizontal line"),r.a.createElement("li",null,r.a.createElement("b",null,"\xa0")," Followed by 2 spaces for forced blank line separation")),r.a.createElement("p",null,"You could use data entered via form by placing them within double curly brackets like ",r.a.createElement("b",null,"{{NAME}}"),". Use the name of the field (case-sensitive) like ",r.a.createElement("b",null,"PN"),", ",r.a.createElement("b",null,"DATE")," or any other custom ones that you have created."),r.a.createElement("h3",null,"Special Placeholders"),r.a.createElement("p",null,"Apart from fields, there are various other special placeholders that you could use.",r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"His, He, Him"),": These placeholder works with GENDER field.",r.a.createElement("br",null),"Example: ",r.a.createElement("b",null,"{{He}}"," is in sound health")),r.a.createElement("li",null,r.a.createElement("b",null,"Mr"),": This place holder works with GENDER and MARRIED field."),r.a.createElement("li",null,r.a.createElement("b",null,"YYYY"),": Display 4 digit year 2018, 2019"),r.a.createElement("li",null,r.a.createElement("b",null,"YY"),": Display 2 digit year 18, 19"),r.a.createElement("li",null,r.a.createElement("b",null,"Do"),": Display date of month with suffix 1st, 2nd, ..."),r.a.createElement("li",null,r.a.createElement("b",null,"DD"),": Display 2 digit date of month 01, 02, ..."),r.a.createElement("li",null,r.a.createElement("b",null,"ddd"),": Display 3 character week day Sun, Mon, ..."),r.a.createElement("li",null,r.a.createElement("b",null,"dddd"),": Display full week day Sunday, Monday, ..."),r.a.createElement("li",null,r.a.createElement("b",null,"MM"),": Display 2 digit month 01, 02, ... 11, 12"),r.a.createElement("li",null,r.a.createElement("b",null,"MMM"),": Dislay 3 character month Jan, Feb, ..."),r.a.createElement("li",null,"Example: ",r.a.createElement("b",null,"{{Do}} {{MMM}}, {{YYYY}}")," becomes ",r.a.createElement("b",null,"1st Jan, 2019")),r.a.createElement("li",null,r.a.createElement("b",null,"AGE"),": This is a special place holder that uses DOB and DATE field to calculate age. Example: ",r.a.createElement("b",null,"{{AGE}}"," old")," becomes ",r.a.createElement("b",null,"99 years old"))),r.a.createElement("h3",null,"Using list values"),r.a.createElement("p",null,"Enter list data in multiple lines and use specical prefixes to display them in bullets or numbering"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"{{MEDICATIONS:*}}")," will display medications as bulleted list"),r.a.createElement("li",null,r.a.createElement("b",null,"{{MEDICATIONS:1.}}")," will display medications as numbered list")),r.a.createElement("h3",null,"Formatting numbers"),r.a.createElement("p",null,"You could format number values"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"{{PRICE:#:0.00}}")," will display number with 2 decimal places."),r.a.createElement("li",null,"Example: ",r.a.createElement("b",null,"{{PRICE:#:0,0}}")," will display number with comma separation"))))}function de(e,t){return function(n){try{var a=JSON.parse(n);if(!a.markdown||"string"!==typeof a.markdown)throw new Error("No template content found");if(!a.structure||!Array.isArray(a.structure))throw new Error("No template definition found");window.confirm("Are you sure you want to replace the existing template with the new one ?")&&(a.structure.forEach((function(e){"PN"!==e.name&&"NAME"!==e.name&&"DATE"!==e.name||void 0===e.searchable&&(e.searchable=!0)})),E.saveConfig(a),e(a.structure),t(a.markdown))}catch(r){window.alert("Failed to import template: ".concat(r.message))}}}function fe(e,t){return function(){return{name:"Formish-Template.json",data:JSON.stringify({structure:e,markdown:t}),type:"application/json"}}}var Ee=function(){var e=E.loadConfig(),t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],l=n[1],i=Object(a.useState)(e.structure),u=Object(o.a)(i,2),s=u[0],m=u[1],d=Object(a.useState)(e.markdown),f=Object(o.a)(d,2),h=f[0],b=f[1],g=Object(a.useState)(!1),p=Object(o.a)(g,2),A=p[0],O=p[1],w=Object(a.useCallback)((function(){return l((function(e){return!e}))}),[]),y=Object(a.useCallback)((function(e){b(e.target.value),O(!0)}),[]),j=Object(a.useCallback)((function(){E.saveConfig({markdown:h,structure:s}),O(!1)}),[s,h]),N=Object(a.useCallback)((function(e){return function(t){m((function(n){return n.map((function(n,a){return a===e?t(n):n}))})),O(!0)}}),[]),I=Object(a.useCallback)((function(){m((function(e){return e.concat({type:"Text",name:"FIELD_".concat(e.length+1)})})),O(!0)}),[]);return re((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{onPrepare:fe(s,h)},"Export Template"),r.a.createElement(v,{onChange:de(m,b)},"Import Template"))})),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Full"},r.a.createElement("div",{className:"Half Editor",style:{position:"relative"}},r.a.createElement("button",{style:{position:"absolute",right:10,top:10},onClick:w},c?"Close":"Help"),r.a.createElement("div",{className:"Full",style:{padding:"10px",backgroundColor:"#eee"}},c?r.a.createElement(me,null):r.a.createElement("textarea",{style:{outline:0},value:h,onChange:y})),r.a.createElement("table",null,r.a.createElement("tbody",null,s.map((function(e,t){return r.a.createElement(se,{key:t,value:e,onChange:N(t)})})),r.a.createElement("tr",{style:{backgroundColor:"black"}},r.a.createElement("td",null,r.a.createElement("button",{style:{fontSize:"14pt"},onClick:I},"Add")),r.a.createElement("td",{colSpan:"2"}),r.a.createElement("td",{align:"right"},A&&r.a.createElement("button",{style:{fontSize:"14pt"},onClick:j},"Save")))))),r.a.createElement("div",{className:"Half"},r.a.createElement(K,{source:h,structure:s,record:null}))))};n(370);var he=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1];return re((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return c(!n)}},n?"Reports":"Design"))}),[n]),n?r.a.createElement(Ee,null):r.a.createElement(ue,null)};l.a.render(r.a.createElement(ce,{title:"Formish"},r.a.createElement(he,null)),document.getElementById("root"))},57:function(e){e.exports=JSON.parse('{"name":"discharge-report","version":"0.1.5","private":true,"dependencies":{"date-fns":"^1.30.1","numeral":"^2.0.6","react":"^16.8.6","react-dom":"^16.8.6","react-markdown":"^4.0.8","react-scripts":"3.0.1","react-window":"^1.8.1"},"homepage":".","repository":{"type":"git","url":"https://github.com/syaau/formish.git"},"scripts":{"start":"react-scripts start","build":"react-scripts build && rimraf docs && mv build docs","test":"react-scripts test","eject":"react-scripts eject","deploy":"yarn version && yarn build && git add docs && git commit -m \'Release\' && git push origin master"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')}},[[127,1,2]]]);
//# sourceMappingURL=main.9567d600.chunk.js.map